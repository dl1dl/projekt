@model Recipe

@{
    ViewData["Title"] = @Model.Name;
}

<div>
    <h2>@Model.Name</h2>

    @if (ViewBag.isLogged)
    {
        @if (ViewBag.isAuthor)
        {
            <a class="btn btn-default disabled">dodaj do ulubionych</a>
        }
        else
        {
            if (!ViewBag.isInFavorites)
            {
                <a asp-route-id="@Model.RecipeID" asp-controller="Recipe" asp-action="AddToFavorites" class="btn btn-default">dodaj do ulubionych</a>
            }
            else
            {
                <a asp-controller="Recipe" asp-action="RemoveFromFavorites" asp-route-id="@ViewBag.favoriteRecipeID" class="btn btn-danger">usuń z ulubionych</a>
            }
        }
    }

    <p>autor: <a asp-controller="Account" asp-action="Details" asp-route-id="@Model.Author.Id">@Model.Author.Email</a></p>
    <p>kategoria: <a asp-controller="Category" asp-action="AllRecipes" asp-route-id="@Model.Category.CategoryID">@Model.Category.Name</a></p>
    <p>trudność wykonania: @Model.DifficultyLevel.Name</a></p>
    <p>@Model.Body</p>
</div>

<div>
    @await Component.InvokeAsync("AddComment", new { recipeID = Model.RecipeID })

    <h3>Komentarze:</h3>
    @foreach (var c in Model.Comments)
    {
        <h6><a asp-controller="Account" asp-action="Details" asp-route-id="@c.Author.Id">@c.Author</a></h6>
        <p>@c.Body</p>
    }
</div>